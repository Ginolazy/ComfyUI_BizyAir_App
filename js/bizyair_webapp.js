const a0_0x4d990e=a0_0xd230;function a0_0xd230(_0x485523,_0x4fc85c){_0x485523=_0x485523-0x185;const _0x447e3=a0_0x447e();let _0xd230f5=_0x447e3[_0x485523];if(a0_0xd230['fbiOeP']===undefined){var _0x58ec2b=function(_0x457e46){const _0x2b09ae='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xef7c9f='',_0x1171a0='';for(let _0x391c56=0x0,_0x5982cd,_0x232a6c,_0x23d652=0x0;_0x232a6c=_0x457e46['charAt'](_0x23d652++);~_0x232a6c&&(_0x5982cd=_0x391c56%0x4?_0x5982cd*0x40+_0x232a6c:_0x232a6c,_0x391c56++%0x4)?_0xef7c9f+=String['fromCharCode'](0xff&_0x5982cd>>(-0x2*_0x391c56&0x6)):0x0){_0x232a6c=_0x2b09ae['indexOf'](_0x232a6c);}for(let _0x39c082=0x0,_0x5c3e85=_0xef7c9f['length'];_0x39c082<_0x5c3e85;_0x39c082++){_0x1171a0+='%'+('00'+_0xef7c9f['charCodeAt'](_0x39c082)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1171a0);};a0_0xd230['UFXAyQ']=_0x58ec2b,a0_0xd230['iiYMoo']={},a0_0xd230['fbiOeP']=!![];}const _0x233c71=_0x447e3[0x0],_0x140d3b=_0x485523+_0x233c71,_0x1ce0c2=a0_0xd230['iiYMoo'][_0x140d3b];return!_0x1ce0c2?(_0xd230f5=a0_0xd230['UFXAyQ'](_0xd230f5),a0_0xd230['iiYMoo'][_0x140d3b]=_0xd230f5):_0xd230f5=_0x1ce0c2,_0xd230f5;}(function(_0x3bd36b,_0x4b0cbd){const _0x9bec76=a0_0xd230,_0x5d7c4b=_0x3bd36b();while(!![]){try{const _0x40882a=-parseInt(_0x9bec76(0x1b4))/0x1*(parseInt(_0x9bec76(0x187))/0x2)+parseInt(_0x9bec76(0x1d7))/0x3*(-parseInt(_0x9bec76(0x1e7))/0x4)+-parseInt(_0x9bec76(0x1fe))/0x5+parseInt(_0x9bec76(0x1e4))/0x6*(-parseInt(_0x9bec76(0x1f7))/0x7)+parseInt(_0x9bec76(0x238))/0x8*(parseInt(_0x9bec76(0x1a7))/0x9)+-parseInt(_0x9bec76(0x190))/0xa*(parseInt(_0x9bec76(0x1ae))/0xb)+parseInt(_0x9bec76(0x1eb))/0xc;if(_0x40882a===_0x4b0cbd)break;else _0x5d7c4b['push'](_0x5d7c4b['shift']());}catch(_0x2796ca){_0x5d7c4b['push'](_0x5d7c4b['shift']());}}}(a0_0x447e,0xb1cd9));import{app}from'../../../scripts/app.js';import{api}from'../../../scripts/api.js';import{ComfyWidgets}from'../../../scripts/widgets.js';const appCache={'metadata':new Map(),'details':new Map(),async 'update'(_0xef7c9f,_0x1171a0){const _0x594a29=a0_0xd230,_0x391c56=new Set(_0xef7c9f);for(const _0x232a6c of this['metadata']['keys']()){!_0x391c56[_0x594a29(0x1fb)](_0x232a6c)&&(this[_0x594a29(0x1ba)]['delete'](_0x232a6c),this[_0x594a29(0x1ee)][_0x594a29(0x1fc)](_0x232a6c));}const _0x5982cd=_0xef7c9f[_0x594a29(0x23f)](_0x23d652=>!this[_0x594a29(0x1ee)]['has'](_0x23d652));_0x5982cd[_0x594a29(0x1ff)]>0x0&&await this[_0x594a29(0x22b)](_0x5982cd,_0x1171a0);},async 'fetchBatch'(_0x39c082,_0x5c3e85){const _0x5f1356=_0x39c082['map'](_0x231ab1=>{const _0xcca931=a0_0xd230;if(pendingRequests[_0xcca931(0x1ee)][_0xcca931(0x1fb)](_0x231ab1))return pendingRequests[_0xcca931(0x1ee)][_0xcca931(0x1b1)](_0x231ab1);const _0x224360=((async()=>{const _0x549710=_0xcca931;try{const _0x154f32=await fetch(_0x549710(0x1ea)+_0x231ab1,{'headers':{'Authorization':_0x549710(0x185)+_0x5c3e85}}),_0x5bafac=await _0x154f32[_0x549710(0x199)]();if(_0x5bafac['code']===0x4e20&&_0x5bafac['data']){const _0x5902d0=_0x5bafac[_0x549710(0x1b2)];return this[_0x549710(0x1ba)][_0x549710(0x1e3)](_0x231ab1,{'id':_0x5902d0['id'],'name':_0x5902d0[_0x549710(0x200)]}),this['details'][_0x549710(0x1e3)](_0x231ab1,_0x5902d0),_0x5902d0;}return null;}catch(_0x56b530){return console[_0x549710(0x1cc)](_0x549710(0x23a)+_0x231ab1+':',_0x56b530),null;}finally{pendingRequests['details'][_0x549710(0x1fc)](_0x231ab1);}})());return pendingRequests['details'][_0xcca931(0x1e3)](_0x231ab1,_0x224360),_0x224360;});await Promise['all'](_0x5f1356);}},pendingRequests={'details':new Map()},BizyAirProUtils={'isPro'(_0x53f4b9){const _0x33e35c=a0_0xd230;if(!_0x53f4b9)return![];const _0x4a136f=(_0x53f4b9[_0x33e35c(0x200)]||'')[_0x33e35c(0x202)]();if(_0x4a136f[_0x33e35c(0x1a9)](_0x33e35c(0x225))||_0x4a136f[_0x33e35c(0x1a9)]('视频')||_0x4a136f[_0x33e35c(0x1a9)]('audio')||_0x4a136f['includes']('音频'))return!![];const _0x51e8fe=_0x53f4b9[_0x33e35c(0x22d)]||[];return _0x51e8fe[_0x33e35c(0x21a)](_0x51f5d5=>{const _0x5bad66=_0x33e35c,_0x4316ee=(_0x51f5d5[_0x5bad66(0x1e1)]||'')[_0x5bad66(0x202)]();return _0x4316ee[_0x5bad66(0x1a9)]('loadvideo')||_0x4316ee['includes'](_0x5bad66(0x1cb));});}};function a0_0x447e(){const _0x5a6a98=['yxvKAw8','C3rYAw5N','Aw5WDxrZ','B3b0Aw9UCW','y2fSBgjHy2S','D2vIqxbWx2XPC3q','mta4tKfVrg9T','CMvMCMvZAa','Aw5JBhvKzxm','BwvZC2fNzq','C2vYAwfSAxPLvMfSDwu','C2v0rgLYDhLdyw52yxm','CMvNAxn0zxjoB2rL','mJK3zfr0AKTi','zMLLBgrFDhLWzq','zMLLBgrFBgfIzwW','z2v0','zgf0yq','tM9Uzq','mxPrB1bsBa','zMLSBfjLy3q','q0noB3rLCY5cAxP5qwLYv2vIqxbW','AxnqCM8','C3vIC3rYAw5N','y2fJAgvKx3DLyL9HChbFAwq','Bwv0ywrHDge','Aw5WDxrFDMfSDwvZx2PZB24','yxbWBhK','w0jPENLbAxjxzwjbChbDihvWzgf0zvDPzgDLDfzHBhvLCYbLCNjVCJO','DxbKyxrLqxbWtgLZDfDPzgDLDa','zMXVyxq','ChjLy2LZAw9U','D2vIx2fWCf9Pza','vKLeru8','zMLSBfn0EwXL','sw5PDgLHBgL6Aw5NlI4U','DMfSDwvZ','CMvTB3zLt3v0Chv0','BNvTyMvY','DxbKyxrLsw5WDxrZrM9YqxbW','ywrKv2LKz2v0','BgLUAW','Bg9Hzgf1zgLV','zxjYB3i','u1rssu5h','zNjVBq','y29UDMvYDgvKlxDPzgDLDa','qML6EufPCLDLyKfWCa','u3rLCcaYoIbfBNrLCIb0AguGtgLJzw5ZzsblzxKGEw91ihjLy2vPDMvKoG','4PYfiefdveLwqvrfra','yxbPx2TLEq','DhLWzq','zMv0y2HbCgK','BgfIzwW','mtqWmZfcsgfetfa','lI4U','C3rLCdi','yML6EwfPCL9TC2C','DMfYAwfIBgvFBMfTzq','8j+uTcbuuKLbtcbnt0rfcG','CMvTB3zLtgLUAW','i2q4zdHKoa','DgfYz2v0x2LK','DhjPBq','BM9Kzv90ExbL','x3vWzgf0Aw5Nsw5WDxrZ','C2v0','ody2otrHEgXky08','Dg9tDhjPBMC','y29TChv0zvnPEMu','mty0zgDKBuzP','C3rYAw5NAwz5','8j+uKsbby3rPDMf0zsbmAwnLBNnLic8GvMLLDYbtDgf0Dxm','Ahr0Chm6lY9HCgKUyML6EwfPCI5JBI94l3yXl3DLyMfWCc8','nda3odeXotzqq1nZrxO','zhjHDW','B25szw1VDMu','zgv0ywLSCW','z3jHCgG','su1br0u','l2jPENLHAxjFD2vIyxbWl2rLzMf1BhrFyxbWx2XPC3q','rxjYB3iGy2HLy2TPBMCGBgLJzw5ZztOG','ywrKsw5WDxq','C2f2zq','C3rLCa','Aw50','nJiZy2LuyND3','BgLUA3m','yML6EwfPCL9ZDgf0Dxm','zgLZy29UBMvJDeLUChv0','AgfZ','zgvSzxrL','y3vZDg9TDgv4Da','mtm3mZeWnuXkCgfnBq','BgvUz3rO','BMfTzq','ChjVCgvYDgLLCW','Dg9mB3DLCKnHC2u','rxHLy3v0Aw9UihDHCYbJyw5JzwXSzwqGyNKGDxnLCI4','v2fPDgLUzYbMB3iGu3LUyY4UlG','DxbKyxrL','4PYfiefdveLwqvrfraOkww91CIbnywnOAw5LieLeigLZoG','icHqCM8P','tg9HzcbgywLSzwqGkfn5BMmGtwLZC2LUzYK','twfJAgLUzsbjrdOG','BwfJAgLUzv9Pza','z2v0tM9Kzuj5swq','C3bSAwnL','y29TzNLdBgfZCW','w0jPENLbAxjxzwjbChbDifjLBMrLCIbLCNjVCJO','Dgv4Da','B25qCM9Wzxj0EunOyw5Nzwq','B25eCMf3rM9YzwDYB3vUza','C2v0u2L6zq','BM9Uzq','x3jLBMrLCKzYB21eyxrH','y3jLyxrL','l2jPENLHAxjFD2vIyxbWl2XPy2vUC2vFAw5MBW','zMLLBgrFB3b0Aw9UCW','rMfPBgvKihrVigzLDgnOigXPy2vUC2uGAw5MBW','ywrK','C29Tzq','zM9YrwfJAa','uMvHzhKH','Aw5WDxrfBa','DwLFC25HChnOB3q','D2fYBG','ywrKrxzLBNrmAxn0zw5LCG','zMLUza','C3r5Bgu','zxHLy3v0Aw9Ux2LUDgvYCNvWDgvK','B25szw1VDMvK','DMLKzw8','yM9VBgvHBG','D2LKz2v0CW','u3rHDhvZoIa','qvbq','C3vJy2vZCW','zMv0y2HcyxrJAa','Bg9HzhzPzgvV','Aw5WDxrFBM9Kzxm','rMfPBgvK','CMvTB3zL','8j+uTcbuuKLbtcbnt0rf','Bwf4','ue9tva','CMvWB3j0u3rHDhvZ','l2jPENLHAxjFD2vIyxbWl2fJDgL2yxrL','C2XPy2u','BM9Kzxm','yML6EwfPCL9WCM9NCMvZCW','otq0mtm2AgfqzKPe','yML6EwfPCL9ZDgf0DxnFDgLTzxi','w0fWCenHy2HLxsbfCNjVCIbMzxrJAgLUzYbHChaG','zM9UDa','zgLZCgXHEq','u3vJy2vZCW','y29TyM8','zMLSDgvY','Dg9Nz2XL','z2v0rxH0CMfnzw51t3b0Aw9UCW','ChvZAa','qMvHCMvYia','C2L6zq','mJa0nJCXmM1pBLnfAa','DMfSDwu','AxnFywn0AxzHDgvK','BgfZDfvjtgLZDa','qvvesu8','w0jPENLbAxjxzwjbChbDifnUyxbZAg90ihjLC3rVCMuGzMfPBgvKoG','zhjVCgrVD24','AxnszwzYzxnOAw5N','BwLU','ndG1ndmWwhPbBwv4','C3rHDhvZx21ZzW','Aw5WDxrFBwfWCgLUzW','CMv2zxjZzq','oLvUA25VD24','cGPtDgvWide6ienVChKGEw91CIbnywnOAw5LieLeigjLBg93igfUzcbZzw5KigL0ihrVihrOzsbKzxzLBg9Wzxi6cIHdBgLJAYbpsYb0BYbWCM9JzwvKihrVifn0zxaGmIK','DMfYAwfIBgvoyw1L','DgfYz2v0x3nSB3q','ChjVDg90ExbL','ANnVBG','CMvMCMvZAefWCeXPC3q','x3bVCNrFBwfW','w0DSB2jHBefWCeXPC3rDifjLzNjLC2GGzMfPBgvKoG','B3v0Chv0CW','zgvMyxvSDf9HChbZ','CMvNAxn0zxjfEhrLBNnPB24','C3bSAxq'];a0_0x447e=function(){return _0x5a6a98;};return a0_0x447e();}api['addEventListener'](a0_0x4d990e(0x237),({detail:_0x1c438e})=>{const _0x14fdf4=a0_0x4d990e,{node_id:_0x55be14,progress:_0x5c8810,status:_0x195201,msg:_0x282483}=_0x1c438e,_0x8dcf4c=app[_0x14fdf4(0x1ef)]['getNodeById'](_0x55be14);_0x8dcf4c&&(_0x8dcf4c['bizyair_status_timer']&&(clearTimeout(_0x8dcf4c[_0x14fdf4(0x239)]),_0x8dcf4c['bizyair_status_timer']=null),_0x8dcf4c['bizyair_progress']=_0x5c8810,_0x8dcf4c[_0x14fdf4(0x1f9)]=_0x195201,_0x8dcf4c['bizyair_msg']=_0x282483,_0x8dcf4c['setDirtyCanvas'](!![],!![]),(_0x195201===_0x14fdf4(0x23d)||_0x5c8810===0x1&&_0x195201!==_0x14fdf4(0x22e))&&(_0x8dcf4c[_0x14fdf4(0x239)]=setTimeout(()=>{const _0x27cb12=_0x14fdf4;_0x8dcf4c[_0x27cb12(0x237)]=0x0,_0x8dcf4c[_0x27cb12(0x1f9)]=null,_0x8dcf4c[_0x27cb12(0x1da)]=null,_0x8dcf4c[_0x27cb12(0x1ac)](!![],!![]);},0x7d0)));}),api[a0_0x4d990e(0x220)](a0_0x4d990e(0x223),({detail:_0x1ec084})=>{const _0x36d209=a0_0x4d990e,{node_id:_0x476f37}=_0x1ec084,_0x3f3f07=app[_0x36d209(0x1ef)][_0x36d209(0x20b)](_0x476f37);if(_0x3f3f07&&_0x3f3f07[_0x36d209(0x20d)]===_0x36d209(0x1d0)){_0x3f3f07[_0x36d209(0x237)]=0x0,_0x3f3f07[_0x36d209(0x1f9)]='Interrupted',_0x3f3f07['bizyair_msg']=_0x36d209(0x203),_0x3f3f07['setDirtyCanvas'](!![],!![]);if(_0x3f3f07[_0x36d209(0x239)])clearTimeout(_0x3f3f07['bizyair_status_timer']);_0x3f3f07[_0x36d209(0x239)]=setTimeout(()=>{const _0xafc76b=_0x36d209;_0x3f3f07[_0xafc76b(0x1f9)]=null,_0x3f3f07['bizyair_msg']=null,_0x3f3f07['setDirtyCanvas'](!![],!![]);},0xbb8);}});const globalAppListManager={'nodes':new Set(),'isRefreshing':![],'lastUIList':['None'],'registerNode'(_0x3d1776){const _0xebbfcf=a0_0x4d990e;this[_0xebbfcf(0x236)]['add'](_0x3d1776);},'unregisterNode'(_0x5d3701){const _0x37a6aa=a0_0x4d990e;this[_0x37a6aa(0x236)][_0x37a6aa(0x1fc)](_0x5d3701);},async 'refresh'(){const _0x4f6594=a0_0x4d990e;if(this['isRefreshing'])return;this[_0x4f6594(0x18e)]=!![];try{const _0x13a036=await getApiKey();if(!_0x13a036)return;const _0x1a5056=new Set();for(const _0x3c9aa2 of this['nodes']){const _0x28735e=String(_0x3c9aa2[_0x4f6594(0x201)]?.[_0x4f6594(0x1a6)]||'');_0x28735e[_0x4f6594(0x1a0)](/[\n,]/)['map'](_0x5b0ff9=>_0x5b0ff9[_0x4f6594(0x1e0)]())[_0x4f6594(0x23f)](Boolean)[_0x4f6594(0x21b)](_0x3e7756=>_0x1a5056[_0x4f6594(0x219)](_0x3e7756));}const _0x56f42b=await getDefaultAppList();_0x56f42b[_0x4f6594(0x21b)](_0x2d17ae=>_0x1a5056[_0x4f6594(0x219)](_0x2d17ae));const _0x43530b=Array[_0x4f6594(0x1ce)](_0x1a5056);if(_0x43530b['length']===0x0){this['lastUIList']=[_0x4f6594(0x1b3)];for(const _0x106326 of this[_0x4f6594(0x236)])_0x106326[_0x4f6594(0x1be)]([_0x4f6594(0x1b3)]);return;}await appCache[_0x4f6594(0x205)](_0x43530b,_0x13a036);const _0x123373=_0x43530b['map'](_0xeea94e=>{const _0x4ab301=_0x4f6594,_0x3a12b2=appCache[_0x4ab301(0x1ba)][_0x4ab301(0x1b1)](_0xeea94e),_0x1bf540=appCache[_0x4ab301(0x1ee)]['get'](_0xeea94e),_0x3bf6f2=BizyAirProUtils[_0x4ab301(0x1b7)](_0x1bf540)?_0x4ab301(0x207):'';return _0x3a12b2?_0xeea94e+':'+_0x3a12b2['name']+_0x3bf6f2:_0xeea94e+_0x4ab301(0x194);});this[_0x4f6594(0x18a)]=_0x123373;for(const _0x5ace87 of this[_0x4f6594(0x236)])_0x5ace87[_0x4f6594(0x1be)](_0x123373);}catch(_0x1cace1){console['error'](_0x4f6594(0x19c),_0x1cace1);}finally{this[_0x4f6594(0x18e)]=![];}}};async function getApiKey(){const _0x1bc0cd=a0_0x4d990e;try{const _0x1bd48e=await api[_0x1bc0cd(0x1d5)]('/bizyair_webapp/get_api_key');if(!_0x1bd48e['ok'])return null;const _0x5ac840=await _0x1bd48e[_0x1bc0cd(0x199)]();return _0x5ac840[_0x1bc0cd(0x1d3)];}catch{return null;}}async function getDefaultAppList(){const _0x310bbe=a0_0x4d990e;try{const _0x1f2485=await api[_0x310bbe(0x1d5)](_0x310bbe(0x1f1));if(!_0x1f2485['ok'])return[];const _0x332571=await _0x1f2485['json']();return _0x332571[_0x310bbe(0x19e)]||[];}catch{return[];}}const WidgetFactory={'create'(_0x218197,_0x5f6725,_0x497192){const _0x3bad17=a0_0x4d990e,{label:_0x2274f2,type:_0x9e9606,defaultValue:_0x34c24d,options:_0x21ad77,variableName:_0x1d725d}=_0x5f6725;let _0xd15ccc;if(_0x9e9606==='toggle'||_0x9e9606===_0x3bad17(0x226))_0xd15ccc=_0x218197[_0x3bad17(0x1c9)](_0x3bad17(0x240),_0x2274f2,!!_0x34c24d,_0x497192,_0x21ad77);else{if(_0x9e9606===_0x3bad17(0x23e)||_0x9e9606===_0x3bad17(0x18d)){const _0x207d81=_0x21ad77[_0x3bad17(0x1c5)]||[_0x34c24d];_0xd15ccc=_0x218197[_0x3bad17(0x1c9)](_0x3bad17(0x23e),_0x2274f2,_0x34c24d,_0x497192,{'values':_0x207d81});}else{if(_0x9e9606===_0x3bad17(0x1fd)){const _0x239a92=ComfyWidgets[_0x3bad17(0x1cd)](_0x218197,_0x2274f2,[_0x3bad17(0x1cd),{'multiline':!![]}],app);_0xd15ccc=_0x239a92['widget'],_0xd15ccc[_0x3bad17(0x1a5)]=_0x497192;if(_0xd15ccc[_0x3bad17(0x21d)])_0xd15ccc['inputEl'][_0x3bad17(0x222)][_0x3bad17(0x23c)]='';_0xd15ccc[_0x3bad17(0x188)]=_0x34c24d;}else{if(_0x9e9606===_0x3bad17(0x1bf)||_0x9e9606==='number'||_0x9e9606===_0x3bad17(0x1f6)){let _0x151e54=Number(_0x34c24d);if(isNaN(_0x151e54))_0x151e54=0x0;const _0x4f45ba={};let _0x1c465f=0x1;if(_0x21ad77[_0x3bad17(0x1d9)]!==undefined)_0x1c465f=Number(_0x21ad77[_0x3bad17(0x1d9)]);else{if(_0x21ad77[_0x3bad17(0x1f5)]!==undefined)_0x1c465f=Number(_0x21ad77[_0x3bad17(0x1f5)]);}if(isNaN(_0x1c465f)||_0x1c465f<=0x0)_0x1c465f=0x1;_0x4f45ba[_0x3bad17(0x1f5)]=_0x1c465f*0xa;if(_0x21ad77&&_0x21ad77[_0x3bad17(0x18f)]!==undefined){const _0x174f70=Number(_0x21ad77['min']);if(!isNaN(_0x174f70))_0x4f45ba[_0x3bad17(0x18f)]=_0x174f70;}if(_0x21ad77&&_0x21ad77[_0x3bad17(0x231)]!==undefined){const _0x143dd6=Number(_0x21ad77[_0x3bad17(0x231)]);if(!isNaN(_0x143dd6))_0x4f45ba[_0x3bad17(0x231)]=_0x143dd6;}const _0x1e9810=_0x1c465f[_0x3bad17(0x1e5)]();_0x4f45ba[_0x3bad17(0x1c0)]=_0x1e9810[_0x3bad17(0x1a9)]('.')?_0x1e9810[_0x3bad17(0x1a0)]('.')[0x1][_0x3bad17(0x1ff)]:0x0,_0xd15ccc=_0x218197['addWidget'](_0x3bad17(0x1c7),_0x2274f2,_0x151e54,_0x4566e8=>{const _0x33caa5=_0x3bad17;_0x497192(),_0x218197[_0x33caa5(0x1ac)](!![],![]);},_0x4f45ba);}else _0xd15ccc=_0x218197['addWidget'](_0x3bad17(0x20f),_0x2274f2,String(_0x34c24d),_0x497192,_0x21ad77);}}}if(_0xd15ccc)_0xd15ccc['variableName']=_0x1d725d;return _0xd15ccc;}};app[a0_0x4d990e(0x19f)]({'name':a0_0x4d990e(0x1b6),async 'beforeRegisterNodeDef'(_0x4ce55f,_0x1cde2b,_0x34ede3){const _0x1a0229=a0_0x4d990e;if(_0x1cde2b['name']!=='BizyAirWebApp')return;_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x210)]=function(_0x4403d7,_0x342dcc){const _0x483ab6=_0x1a0229;_0x4403d7===_0x483ab6(0x1a6)&&(this['properties'][_0x4403d7]=_0x342dcc,globalAppListManager[_0x483ab6(0x1a8)]());};const _0x433638=_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x241)];_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x241)]=function(_0x5e78e5,_0xf72489){const _0x467526=_0x1a0229;if(_0x433638)_0x433638[_0x467526(0x1bc)](this,arguments);_0xf72489[_0x467526(0x242)]({'content':_0x467526(0x1e9),'callback':async()=>{const _0x491c8f=_0x467526;try{const _0x3f688c=await fetchLicenseInfo();let _0x337d13=_0x491c8f(0x209)+_0x3f688c[_0x491c8f(0x20a)]+'\x0a';_0x337d13+=_0x491c8f(0x228)+(_0x3f688c[_0x491c8f(0x189)]?_0x491c8f(0x1d2):_0x491c8f(0x230))+'\x0a';if(!_0x3f688c[_0x491c8f(0x189)]){prompt(_0x491c8f(0x1dc)+_0x3f688c[_0x491c8f(0x191)]+_0x491c8f(0x195),_0x3f688c['machine_id']);const _0x377749=prompt(_0x491c8f(0x1d1));if(_0x377749){const _0x52a469=await activateLicense(_0x377749);alert(_0x52a469[_0x491c8f(0x1aa)]),_0x52a469[_0x491c8f(0x22a)]&&this[_0x491c8f(0x1ac)](!![]);}}else prompt(_0x491c8f(0x206),_0x3f688c[_0x491c8f(0x20a)]);}catch(_0xf37751){alert(_0x491c8f(0x1f2)+_0xf37751);}}});};const _0x5da298=_0x4ce55f[_0x1a0229(0x198)]['onNodeCreated'];_0x4ce55f[_0x1a0229(0x198)]['onNodeCreated']=function(){const _0x43c610=_0x1a0229;if(_0x5da298)_0x5da298[_0x43c610(0x1bc)](this,arguments);globalAppListManager[_0x43c610(0x1ad)](this),this[_0x43c610(0x1e2)]=![],this[_0x43c610(0x201)]=this['properties']||{};if(this[_0x43c610(0x201)][_0x43c610(0x1a6)]===undefined)this[_0x43c610(0x201)][_0x43c610(0x1a6)]='';const _0x254945=this[_0x43c610(0x227)][_0x43c610(0x221)](_0x2b5734=>_0x2b5734[_0x43c610(0x200)]===_0x43c610(0x229));_0x254945&&(_0x254945[_0x43c610(0x1a5)]=async _0xdb13bd=>{const _0x4ac878=_0x43c610;if(_0xdb13bd&&_0xdb13bd!==_0x4ac878(0x1b3)){const _0x22a543=_0xdb13bd[_0x4ac878(0x1a0)](':')[0x0];await this[_0x4ac878(0x1c8)](_0x22a543);}}),setTimeout(()=>{const _0x27cd37=_0x43c610;if(this[_0x27cd37(0x201)][_0x27cd37(0x21e)])try{this[_0x27cd37(0x214)](this[_0x27cd37(0x201)]['ui_snapshot']);}catch(_0x162cae){console[_0x27cd37(0x21f)](_0x27cd37(0x18c),_0x162cae);}this[_0x27cd37(0x19a)]({'restoreCurrentApp':!![]});},0x10);},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x224)]=function(){globalAppListManager['unregisterNode'](this);},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x1be)]=function(_0x410b59){const _0x2e2181=_0x1a0229,_0x29f085=this[_0x2e2181(0x227)][_0x2e2181(0x221)](_0xdd12b=>_0xdd12b['name']===_0x2e2181(0x229));if(!_0x29f085)return;const _0x7c1d2b=_0x29f085[_0x2e2181(0x188)];_0x29f085[_0x2e2181(0x1a4)][_0x2e2181(0x1c5)]=_0x410b59;if(_0x410b59[_0x2e2181(0x1a9)](_0x7c1d2b))_0x29f085[_0x2e2181(0x188)]=_0x7c1d2b;else _0x29f085[_0x2e2181(0x188)]=_0x410b59[0x0]||_0x2e2181(0x1b3);this[_0x2e2181(0x1ac)](!![]);},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x211)]=function(_0x1462ea){const _0x3d0f09=_0x1a0229;this[_0x3d0f09(0x237)]>0x0&&this[_0x3d0f09(0x237)]<0x1&&(_0x1462ea['save'](),_0x1462ea[_0x3d0f09(0x1c3)]='#00FF00',_0x1462ea[_0x3d0f09(0x1b5)](0x0,0x0,this[_0x3d0f09(0x186)][0x0]*this[_0x3d0f09(0x237)],0x1),_0x1462ea['restore']());if(this[_0x3d0f09(0x1f9)]){_0x1462ea[_0x3d0f09(0x1f4)]();let _0xcf0cb0=this['bizyair_status'];if(_0xcf0cb0[_0x3d0f09(0x1ff)]>0x32)_0xcf0cb0=_0xcf0cb0[_0x3d0f09(0x1b8)](0x0,0x30)+_0x3d0f09(0x1d8);_0x1462ea[_0x3d0f09(0x23b)]='10px\x20Arial',_0x1462ea['fillStyle']=_0x3d0f09(0x1de),_0x1462ea['textAlign']='right',_0x1462ea['textBaseline']='top',_0x1462ea['fillText'](_0xcf0cb0,this[_0x3d0f09(0x186)][0x0]-0xa,this[_0x3d0f09(0x186)][0x1]+0xa),_0x1462ea['restore']();}},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x233)]=function(_0x4ebd49,_0x4d605c=0x0){const _0x5254b5=_0x1a0229;this[_0x5254b5(0x1f9)]=_0x4ebd49,this[_0x5254b5(0x1ac)](!![],!![]),this[_0x5254b5(0x239)]&&(clearTimeout(this[_0x5254b5(0x239)]),this[_0x5254b5(0x239)]=null),_0x4d605c>0x0&&(this[_0x5254b5(0x239)]=setTimeout(()=>{const _0x163ac4=_0x5254b5;this[_0x163ac4(0x1f9)]===_0x4ebd49&&(this[_0x163ac4(0x1f9)]=null,this['setDirtyCanvas'](!![],!![]));},_0x4d605c));},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x19a)]=async function(_0x280708={}){const _0x4f1ab4=_0x1a0229,{restoreCurrentApp:restoreCurrentApp=![]}=_0x280708;if(restoreCurrentApp){const _0xbcb5b7=this[_0x4f1ab4(0x227)][_0x4f1ab4(0x221)](_0x4cb123=>_0x4cb123[_0x4f1ab4(0x200)]===_0x4f1ab4(0x229));if(_0xbcb5b7&&_0xbcb5b7[_0x4f1ab4(0x188)]&&_0xbcb5b7[_0x4f1ab4(0x188)]!==_0x4f1ab4(0x1b3)){this[_0x4f1ab4(0x233)]('Initializing...');const _0x991dcc=_0xbcb5b7['value'][_0x4f1ab4(0x1a0)](':')[0x0],_0x3caf43=await this[_0x4f1ab4(0x1c8)](_0x991dcc);if(_0x3caf43)this['reportStatus']('Ready!',0x3e8);else this[_0x4f1ab4(0x233)](null);}}while(globalAppListManager[_0x4f1ab4(0x18e)])await new Promise(_0x5bd862=>setTimeout(_0x5bd862,0x32));await globalAppListManager['refresh']();if(restoreCurrentApp){const _0x2a8a3d=this[_0x4f1ab4(0x227)]['find'](_0x2fc68f=>_0x2fc68f[_0x4f1ab4(0x200)]==='APP');if(_0x2a8a3d&&_0x2a8a3d[_0x4f1ab4(0x188)]&&_0x2a8a3d['value']!==_0x4f1ab4(0x1b3)){this[_0x4f1ab4(0x233)](_0x4f1ab4(0x1c4));const _0x2d7160=_0x2a8a3d[_0x4f1ab4(0x188)]['split'](':')[0x0],_0x48b980=await this[_0x4f1ab4(0x1c8)](_0x2d7160);if(_0x48b980)this[_0x4f1ab4(0x233)](_0x4f1ab4(0x21c),0x3e8);else this[_0x4f1ab4(0x233)](null);}else this[_0x4f1ab4(0x233)](null);}},_0x4ce55f[_0x1a0229(0x198)]['updateInputsForApp']=async function(_0x346d29){const _0x57094e=_0x1a0229;if(this[_0x57094e(0x1e2)])return![];this[_0x57094e(0x1e2)]=!![];try{let _0x4df4fc=appCache['details'][_0x57094e(0x1b1)](_0x346d29);if(!_0x4df4fc&&globalAppListManager[_0x57094e(0x18e)]){this[_0x57094e(0x233)](_0x57094e(0x204));while(globalAppListManager[_0x57094e(0x18e)])await new Promise(_0x221d87=>setTimeout(_0x221d87,0x32));_0x4df4fc=appCache[_0x57094e(0x1ee)]['get'](_0x346d29);}if(!_0x4df4fc)return this[_0x57094e(0x233)](_0x57094e(0x208)),![];return this[_0x57094e(0x201)][_0x57094e(0x21e)]={'id':_0x4df4fc['id'],'name':_0x4df4fc[_0x57094e(0x200)],'input_nodes':_0x4df4fc['input_nodes']},this[_0x57094e(0x214)](_0x4df4fc);}finally{this['_updatingInputs']=![];}},_0x4ce55f[_0x1a0229(0x198)][_0x1a0229(0x214)]=function(_0x329b3c){const _0x5c2dcc=_0x1a0229;try{const _0x961996=_0x329b3c['id'],_0x3c292f=_0x329b3c[_0x5c2dcc(0x22d)]||[];this[_0x5c2dcc(0x201)][_0x5c2dcc(0x1b9)]=String(_0x961996);const _0x174c1d=[_0x5c2dcc(0x229),_0x5c2dcc(0x1a6),_0x5c2dcc(0x1bb)],_0x229d5d={},_0x421eec={};if(this[_0x5c2dcc(0x227)])for(const _0x242492 of this['widgets']){if(!_0x174c1d[_0x5c2dcc(0x1a9)](_0x242492[_0x5c2dcc(0x200)]))_0x421eec[_0x242492[_0x5c2dcc(0x200)]]=_0x242492['value'];}for(let _0x5ee626=this[_0x5c2dcc(0x227)]['length']-0x1;_0x5ee626>=0x0;_0x5ee626--){const _0x13c097=this['widgets'][_0x5ee626];if(!_0x174c1d[_0x5c2dcc(0x1a9)](_0x13c097[_0x5c2dcc(0x200)])){if(_0x13c097[_0x5c2dcc(0x1ed)])_0x13c097[_0x5c2dcc(0x1ed)]();if(_0x13c097['inputEl'])_0x13c097[_0x5c2dcc(0x21d)][_0x5c2dcc(0x22f)]();this['widgets'][_0x5c2dcc(0x20c)](_0x5ee626,0x1);}}const _0x56b8e7=()=>updateWidgetValues(this,_0x229d5d);let _0x137fa5=0x0,_0x36cc42=0x0;const _0xe4757d=new Set();for(const _0x169ff6 of _0x3c292f){let _0x475db1=_0x169ff6[_0x5c2dcc(0x1b0)]||_0x169ff6['node_name']||_0x169ff6[_0x5c2dcc(0x1db)];if(_0xe4757d[_0x5c2dcc(0x1fb)](_0x475db1))_0x475db1=_0x475db1+'\x20('+_0x169ff6['node_id']+')';_0xe4757d[_0x5c2dcc(0x219)](_0x475db1);const _0x1cda92=_0x169ff6[_0x5c2dcc(0x1db)],_0x4f40ce=(_0x169ff6[_0x5c2dcc(0x1e1)]||'')[_0x5c2dcc(0x202)](),_0x5a0be7=_0x169ff6['field_value'],_0x19c83e=_0x4f40ce[_0x5c2dcc(0x1a9)]('loadimage'),_0x55bf93=_0x4f40ce['includes'](_0x5c2dcc(0x1cb)),_0x344f3f=_0x4f40ce[_0x5c2dcc(0x1a9)](_0x5c2dcc(0x22c));if(_0x19c83e||_0x55bf93||_0x344f3f){let _0x5e5327=_0x19c83e?_0x5c2dcc(0x1f0):_0x55bf93?_0x5c2dcc(0x18b):_0x5c2dcc(0x1c2);const _0x2fcb13='input_'+(_0x137fa5+0x1);_0x36cc42<(this[_0x5c2dcc(0x1a3)]?this[_0x5c2dcc(0x1a3)][_0x5c2dcc(0x1ff)]:0x0)?(this[_0x5c2dcc(0x1a3)][_0x36cc42][_0x5c2dcc(0x200)]=_0x2fcb13,this[_0x5c2dcc(0x1a3)][_0x36cc42][_0x5c2dcc(0x1d4)]=_0x5e5327,this[_0x5c2dcc(0x1a3)][_0x36cc42][_0x5c2dcc(0x1d6)]=_0x475db1):(this[_0x5c2dcc(0x1f3)](_0x2fcb13,_0x5e5327),this[_0x5c2dcc(0x1a3)][this[_0x5c2dcc(0x1a3)][_0x5c2dcc(0x1ff)]-0x1]['label']=_0x475db1),_0x229d5d[_0x2fcb13]=_0x1cda92,_0x137fa5++,_0x36cc42++;}else{let _0x2a4aac={};try{if(_0x169ff6[_0x5c2dcc(0x217)])_0x2a4aac=typeof _0x169ff6[_0x5c2dcc(0x217)]===_0x5c2dcc(0x1a2)?JSON['parse'](_0x169ff6[_0x5c2dcc(0x217)]):_0x169ff6[_0x5c2dcc(0x217)];}catch(_0x3d99ca){}const _0x583cd7=WidgetFactory[_0x5c2dcc(0x215)](this,{'label':_0x475db1,'type':(_0x169ff6[_0x5c2dcc(0x1af)]||'')['toLowerCase'](),'defaultValue':_0x5a0be7,'options':_0x2a4aac,'variableName':_0x1cda92},_0x56b8e7);if(_0x421eec[_0x475db1]!==undefined)_0x583cd7[_0x5c2dcc(0x188)]=_0x421eec[_0x475db1];}}if(this[_0x5c2dcc(0x1a3)]){while(this[_0x5c2dcc(0x1a3)][_0x5c2dcc(0x1ff)]>_0x137fa5)this['removeInput'](this[_0x5c2dcc(0x1a3)]['length']-0x1);}if(!this[_0x5c2dcc(0x227)][_0x5c2dcc(0x221)](_0x405544=>_0x405544[_0x5c2dcc(0x200)]===_0x5c2dcc(0x1bb))){const _0xc1964f=this['addWidget'](_0x5c2dcc(0x20f),_0x5c2dcc(0x1bb),'{}',()=>{});_0xc1964f[_0x5c2dcc(0x1ab)]=()=>_0xc1964f[_0x5c2dcc(0x188)],_0xc1964f[_0x5c2dcc(0x1e6)]=()=>[0x0,-0x4],_0xc1964f[_0x5c2dcc(0x1ec)]=()=>{};if(_0xc1964f['inputEl'])_0xc1964f[_0x5c2dcc(0x21d)][_0x5c2dcc(0x222)]['display']=_0x5c2dcc(0x213);}updateWidgetValues(this,_0x229d5d);const _0x5ea800=(_0x329b3c[_0x5c2dcc(0x200)]||'')[_0x5c2dcc(0x202)](),_0x19d5f4=BizyAirProUtils[_0x5c2dcc(0x1b7)](_0x329b3c),_0x125f92=_0x19d5f4?'\x20(Pro)':'';let _0x1ae203='IMAGE';if(_0x5ea800[_0x5c2dcc(0x1a9)](_0x5c2dcc(0x225))||_0x5ea800[_0x5c2dcc(0x1a9)]('视频'))_0x1ae203=_0x5c2dcc(0x1c2);else{if(_0x5ea800[_0x5c2dcc(0x1a9)](_0x5c2dcc(0x1a1))||_0x5ea800[_0x5c2dcc(0x1a9)]('音频'))_0x1ae203='AUDIO';}const _0x555fb4=_0x1ae203+_0x125f92;if(!this[_0x5c2dcc(0x19d)]||this[_0x5c2dcc(0x19d)][_0x5c2dcc(0x1ff)]===0x0)this['addOutput'](_0x555fb4,_0x1ae203),this['outputs'][0x0]['label']=_0x555fb4;else{this[_0x5c2dcc(0x19d)][0x0][_0x5c2dcc(0x200)]=_0x555fb4,this['outputs'][0x0][_0x5c2dcc(0x1d6)]=_0x555fb4,this[_0x5c2dcc(0x19d)][0x0][_0x5c2dcc(0x1d4)]=_0x1ae203;while(this[_0x5c2dcc(0x19d)]['length']>0x1)this[_0x5c2dcc(0x1c6)](this[_0x5c2dcc(0x19d)]['length']-0x1);}validateConnections(this);const _0x425974=this[_0x5c2dcc(0x1e6)]();return this[_0x5c2dcc(0x212)]([Math[_0x5c2dcc(0x231)](this[_0x5c2dcc(0x186)][0x0],_0x425974[0x0]),_0x425974[0x1]]),this[_0x5c2dcc(0x1ac)](!![],!![]),!![];}catch(_0x497bbd){return console[_0x5c2dcc(0x1cc)](_0x5c2dcc(0x20e),_0x497bbd),![];}};}});function updateWidgetValues(_0x3c26bd,_0x421bd4){const _0x1626da=a0_0x4d990e;try{const _0x17ed40={};if(_0x3c26bd[_0x1626da(0x227)])for(const _0x3360b6 of _0x3c26bd['widgets']){if(['web_app_id',_0x1626da(0x192),_0x1626da(0x1bb),_0x1626da(0x229)][_0x1626da(0x1a9)](_0x3360b6[_0x1626da(0x200)])||_0x3360b6[_0x1626da(0x1d4)]===_0x1626da(0x1cf))continue;const _0x2f9eee=_0x3360b6[_0x1626da(0x196)]||_0x3360b6[_0x1626da(0x200)];_0x17ed40[_0x2f9eee]=_0x3360b6[_0x1626da(0x188)];}_0x3c26bd['properties']&&_0x3c26bd[_0x1626da(0x201)]['cached_web_app_id']&&(_0x17ed40[_0x1626da(0x1c1)]=_0x3c26bd['properties'][_0x1626da(0x1b9)]);_0x17ed40[_0x1626da(0x19b)]=_0x421bd4;const _0x2d59e5=_0x3c26bd['widgets'][_0x1626da(0x221)](_0x4bc307=>_0x4bc307[_0x1626da(0x200)]===_0x1626da(0x1bb));if(_0x2d59e5){const _0x19b60c=JSON[_0x1626da(0x1e8)](_0x17ed40);_0x2d59e5[_0x1626da(0x188)]!==_0x19b60c&&(_0x2d59e5['value']=_0x19b60c);}}catch(_0x1d2dc2){console[_0x1626da(0x1cc)](_0x1626da(0x1bd),_0x1d2dc2);}}function validateConnections(_0x325a83){_0x325a83['inputs']?.['forEach']((_0x4d2c5d,_0x3ae46b)=>{const _0x1159aa=a0_0xd230,_0x512937=app[_0x1159aa(0x1ef)][_0x1159aa(0x1f8)][_0x4d2c5d[_0x1159aa(0x1ca)]];if(_0x512937&&_0x512937[_0x1159aa(0x1d4)]!==_0x4d2c5d[_0x1159aa(0x1d4)]&&_0x4d2c5d[_0x1159aa(0x1d4)]!=='*')_0x325a83[_0x1159aa(0x1fa)](_0x3ae46b);}),_0x325a83['outputs']?.['forEach'](_0x3dd6ef=>{const _0x42bd29=a0_0xd230;_0x3dd6ef[_0x42bd29(0x1f8)]?.[_0x42bd29(0x235)]()[_0x42bd29(0x193)]()[_0x42bd29(0x21b)](_0x21ffc9=>{const _0x12b9ca=_0x42bd29,_0x3014e4=app[_0x12b9ca(0x1ef)][_0x12b9ca(0x1f8)][_0x21ffc9];if(_0x3014e4){const _0x137c68=app['graph'][_0x12b9ca(0x20b)](_0x3014e4[_0x12b9ca(0x1df)]),_0x4a8524=_0x137c68?.[_0x12b9ca(0x1a3)]?.[_0x3014e4[_0x12b9ca(0x197)]]?.[_0x12b9ca(0x1d4)];_0x3dd6ef[_0x12b9ca(0x1d4)]!=='*'&&_0x4a8524!=='*'&&_0x3dd6ef[_0x12b9ca(0x1d4)]!==_0x4a8524&&app[_0x12b9ca(0x1ef)][_0x12b9ca(0x1dd)](_0x21ffc9);}});});}async function fetchLicenseInfo(){const _0x282b00=a0_0x4d990e,_0x3bec6a=await api[_0x282b00(0x1d5)](_0x282b00(0x216));if(!_0x3bec6a['ok'])throw new Error(_0x282b00(0x218));return await _0x3bec6a[_0x282b00(0x199)]();}async function activateLicense(_0x30eb3e){const _0x712042=a0_0x4d990e,_0x44ea74=await api[_0x712042(0x1d5)](_0x712042(0x234),{'method':_0x712042(0x232),'body':JSON[_0x712042(0x1e8)]({'key':_0x30eb3e})});return await _0x44ea74['json']();}